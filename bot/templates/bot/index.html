<!DOCTYPE html>
<html lang="tg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∞—Ä–º–æ–∏—à–∏ —Ö”Ø—Ä–æ–∫</title>
    <style>
        body {
            font-family: 'Tahoma', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }

        h1 {
            color: #3498db;
            margin-bottom: 20px;
        }

        p {
            font-size: 18px;
            color: #555;
        }

        a {
            text-decoration: none;
            font-size: 18px;
            color: #fff;
            background-color: #3498db;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        a:hover {
            background-color: #2980b9;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ */
        #popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            width: 80%;
            max-width: 500px;
        }

        #popup h2 {
            margin: 0 0 20px;
            font-size: 24px;
            color: #3498db;
        }

        #popup p {
            font-size: 16px;
            color: #555;
        }

        #popup button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #popup button:hover {
            background-color: #2980b9;
        }

        /* –§–æ–Ω –¥–ª—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è */
        #popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–µ–Ω—é */
        .menu-item {
            background-color: #fff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-item input {
            width: 60px;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .menu-item button {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .menu-item button:hover {
            background-color: #27ae60;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
        #registration-form {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

        #registration-form input {
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 200px;
        }

        #registration-form button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #registration-form button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>

    <h1>–•—É—à –æ–º–∞–¥–µ–¥ –±–∞ –±–æ—Ç–∏ —Ñ–∞—Ä–º–æ–∏—à–∏ —Ö”Ø—Ä–æ–∫!</h1>
    <p><a href="javascript:void(0);" onclick="openPopup()">–ë–∞ —Å”Ø“≥–±–∞—Ç –≥—É–∑–∞—Ä–µ–¥</a></p>

    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ -->
    <div id="popup-overlay"></div>
    <div id="popup">
        <h2>ü§ñ –ë–æ—Ç –±–∞—Ä–æ–∏ —Ñ–∞—Ä–º–æ–∏—à–∏ —Ö”Ø—Ä–æ–∫</h2>
        <p>–ß”£ —Ö”Ø—Ä–æ–∫ –º–µ—Ö–æ“≥–µ–¥ —Ñ–∞—Ä–º–æ–∏—à –¥–∏“≥–µ–¥?</p>
        
        <!-- –ú–µ–Ω—é —Å –±–ª—é–¥–∞–º–∏ -->
        <div class="menu-item">
            <span>–ü–∏—Ü—Ü–∞</span>
            <input type="number" id="pizza-qty" value="0" min="0" />
            <button onclick="addToCart('Pizza', document.getElementById('pizza-qty').value)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        <div class="menu-item">
            <span>–®–∞—à–ª–∏–∫</span>
            <input type="number" id="shashlik-qty" value="0" min="0" />
            <button onclick="addToCart('Shashlik', document.getElementById('shashlik-qty').value)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        <div class="menu-item">
            <span>–ú–∞–Ω—Ç—É</span>
            <input type="number" id="manty-qty" value="0" min="0" />
            <button onclick="addToCart('Manty', document.getElementById('manty-qty').value)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        <div class="menu-item">
            <span>–®”Ø—Ä–±–æ</span>
            <input type="number" id="shurbo-qty" value="0" min="0" />
            <button onclick="addToCart('Shurbo', document.getElementById('shurbo-qty').value)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
        <div id="cart-summary"></div>
        <button onclick="placeOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

        <button onclick="closePopup()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="registration-form">
        <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</p>
        <input type="text" id="phone-number" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" />
        <button onclick="registerUser()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    </div>

    <script>
        // –û—Ç–∫—Ä—ã—Ç–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞
        function openPopup() {
            const phoneNumber = localStorage.getItem('phoneNumber');
            if (!phoneNumber) {
                document.getElementById("registration-form").style.display = "block";
            } else {
                document.getElementById("popup").style.display = "block";
                document.getElementById("popup-overlay").style.display = "block";
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞
        function closePopup() {
            document.getElementById("popup").style.display = "none";
            document.getElementById("popup-overlay").style.display = "none";
        }

        let cart = [];

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(dish, qty) {
            if (qty > 0) {
                cart.push({ dish: dish, qty: qty });
                updateCart();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCart() {
            const cartSummary = document.getElementById("cart-summary");
            cartSummary.innerHTML = "<h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞:</h3>";

            if (cart.length === 0) {
                cartSummary.innerHTML += "<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>";
            } else {
                cart.forEach(item => {
                    cartSummary.innerHTML += `<p>${item.dish} ‚Äî ${item.qty} —à—Ç.</p>`;
                });
            }
        }

        // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function placeOrder() {
            if (cart.length === 0) {
                alert("–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
                return;
            }

            let orderDetails = "–í–∞—à –∑–∞–∫–∞–∑:\n";
            cart.forEach(item => {
                orderDetails += `${item.dish} ‚Äî ${item.qty} —à—Ç.\n`;
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞
            alert(orderDetails);

            // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            sendOrderToServer(cart);

            // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
            cart = [];  // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
            updateCart();  // –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        function sendOrderToServer(cart) {
            const orderData = {
                items: cart,
                user: localStorage.getItem('phoneNumber'),  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            };

            fetch('https://your-django-server.com/api/orders/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(orderData),
            })
            .then(response => response.json())
            .then(data => {
                console.log('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω', data);
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞', error);
            });
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function registerUser() {
            const phoneNumber = document.getElementById("phone-number").value;
            if (!phoneNumber) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.");
                return;
            }
            localStorage.setItem('phoneNumber', phoneNumber);
            alert("–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã!");
            document.getElementById("registration-form").style.display = "none";
            document.getElementById("popup").style.display = "block";
            document.getElementById("popup-overlay").style.display = "block";
        }
    </script>

</body>
</html>
